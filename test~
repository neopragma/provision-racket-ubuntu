#!/bin/bash
# Configure racket training environment

echo
echo '============================================================='
echo 'Downloading Racket'
wget -c http://mirror.racket-lang.org/racket-6.2.1-x86_64-linux-ubuntu-precise.sh -O racket-6.2.1-x86_64-linux-ubuntu-precise.sh

test -f "$HOME/.bashrc-orig" || cp "$HOME/.bashrc" "$HOME/.bashrc-orig"
echo "export PATH=$PATH:/home/racket/bin" >> "$HOME/.bashrc"

echo
echo '============================================================='
echo '>>>> Racket interactive installer <<<<'
echo 'When prompted, reply as follows:'
echo
echo 'When asked for an administrator password...'
echo '  Reply: racket'
echo
echo 'Do you want a Unix-style distribution?'
echo '  Reply: no'
echo
echo 'Where do you want to install the "racket" directory tree?'
echo '  Reply: 3 (that is, ~/racket)'
echo
echo 'If you want to install new system links...'
echo '  Reply: /home/racket'

sh racket-6.2.1-x86_64-linux-ubuntu-precise.sh

echo
echo '============================================================='
echo 'Setting group and owner for Racket configuration files'
pushd "$HOME"
sudo chown racket .cache/dconf
sudo chgrp racket .cache/dconf
sudo chown racket .config/enchant
sudo chgrp racket .config/enchant
sudo chown racket .config/gedit
sudo chgrp racket .config/gedit
sudo chown racket .dbus
sudo chrgp racket .dbus
sudo chown racket .dbus/session-bus
sudo chrgp racket .dbus/session-bus
sudo chown racket .gvfs
sudo chrgp racket .gvfs
popd

echo
echo '============================================================='
echo 'Downloading AppInventor installer'
wget -c http://commondatastorage.googleapis.com/appinventordownloads/appinventor2-setup_1.1_all.deb -O appinventor2-setup_1.1_all.deb

echo
echo '============================================================='
echo 'Installing AppInventor'
sudo dpkg -i *.deb
sudo apt-get install libc6-i386
sudo apt-get install zlib1g:i386


